<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.idcq.appserver.utils.settle.OrderSettleUserAmountDto" >
 <resultMap id="BaseResultMap" type="com.idcq.appserver.utils.settle.OrderSettleUserAmountDto" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Apr 07 15:01:19 CST 2015.
    -->
    <id column="shop_id" property="shopId" jdbcType="BIGINT" />
    <result column="user_id" property="userId" jdbcType="BIGINT" />
    <result column="user_share_settle_flag" property="userShareSettleFlag" jdbcType="INTEGER" />
    <result column="user_ref_share_user_id" property="referUserId" jdbcType="DECIMAL" />
    <result column="shop_serve_share_user_id" property="shopServerUserId" jdbcType="DECIMAL" />
    <result column="shop_serve_share_price" property="shopServerSharePrice" jdbcType="DECIMAL" />
    <result column="level1_agent_share_user_id" property="level1AgentShareUserId" jdbcType="DECIMAL" />
    <result column="level1_agent_price" property="level1AgentPrice" jdbcType="DECIMAL" />
    <result column="level2_agent_share_user_id" property="level2AgentShareUserId" jdbcType="INTEGER" />
    <result column="level2_agent_price" property="level2AgentPrice" jdbcType="INTEGER" />
    <result column="level3_agent_share_user_id" property="level3AgentShareUserId" jdbcType="INTEGER" />
    <result column="level3_agent_price" property="level3AgentPrice" jdbcType="DOUBLE" />
    <result column="user_share_price" property="userSharePrice" jdbcType="DECIMAL" />
    <result column="user_ref_share_price" property="userReferSharePrice" jdbcType="DECIMAL" />
    <result column="shop_ref_share_user_id" property="shopReferShareUserId" jdbcType="DECIMAL" />
    <result column="shop_ref_share_price" property="shopReferSharePrice" jdbcType="INTEGER" />
  </resultMap>
 
  <select id="queryUserSettleInfo" resultMap="BaseResultMap">
  		SELECT shop_id,user_share_settle_flag,user_ref_share_user_id,shop_ref_share_user_id,shop_serve_share_user_id,level1_agent_share_user_id,level2_agent_share_user_id,level3_agent_share_user_id,
	TRUNCATE(SUM(user_share_price),4),TRUNCATE(SUM(user_ref_share_price),4),TRUNCATE(SUM(shop_ref_share_price),4),TRUNCATE(SUM(shop_serve_share_price),4),
	TRUNCATE(SUM(level1_agent_price),4),TRUNCATE(SUM(level2_agent_price),4),TRUNCATE(SUM(level3_agent_price),4)
	FROM  1dcq_order_goods_settle WHERE order_id=#orderId# 
  </select>
  
</mapper>