<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.idcq.appserver.dto.shop.DistribTakeoutSettingDto" >
  <resultMap id="BaseResultMap" type="com.idcq.appserver.dto.shop.DistribTakeoutSettingDto" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Jul 14 16:24:53 CST 2015.
    -->
    <id column="setting_id" property="settingId" jdbcType="INTEGER" />
    <result column="shop_id" property="shopId" jdbcType="INTEGER" />
    <result column="setting_type" property="settingType" jdbcType="TINYINT" />
    <result column="max_reserve_before_day" property="maxReserveBeforeDay" jdbcType="INTEGER" />
    <result column="min_reserve_before_hour" property="minReserveBeforeHour" jdbcType="DECIMAL" />
    <result column="delivery_distribution" property="deliveryDistribution" jdbcType="REAL" />
    <result column="least_book_price" property="leastBookPrice" jdbcType="DECIMAL" />
    <result column="is_cash_on_delivery" property="isCashOnDelivery" jdbcType="TINYINT" />
    <result column="is_cancel_anytime" property="isCancelAnytime" jdbcType="TINYINT" />
    <result column="cancel_before_minute" property="cancelBeforeMinute" jdbcType="INTEGER" />
    <result column="delivery_price" property="deliveryPrice" jdbcType="DECIMAL" />
    <result column="is_reduction" property="isReduction" jdbcType="TINYINT" />
    <result column="reduction" property="reduction" jdbcType="DECIMAL" />
    <result column="order_time_type" property="orderTimeType" jdbcType="TINYINT" />
    <result column="create_time" property="createTime" jdbcType="TIMESTAMP" />
  </resultMap>
  <resultMap id="ResultMapWithBLOBs" type="com.idcq.appserver.dto.shop.DistribTakeoutSettingDto" extends="BaseResultMap" >
    <result column="remark" property="remark" jdbcType="LONGVARCHAR" />
  </resultMap>
  <sql id="Base_Column_List" >
    setting_id, shop_id, setting_type, max_reserve_before_day, min_reserve_before_hour, 
    delivery_distribution, least_book_price, is_cash_on_delivery, is_cancel_anytime, 
    cancel_before_minute, delivery_price, is_reduction, reduction, order_time_type, create_time
  </sql>
  <sql id="Blob_Column_List" >
    remark
  </sql>
  <delete id="delDistribTakeoutSetting" parameterType="java.lang.Long">
  	delete from 1dcq_distribution_takeout_setting where setting_id = #{settingId} 
  </delete>
  <delete id="delDistribTakeoutSettingByType" parameterType="java.util.Map">
  	delete from 1dcq_distribution_takeout_setting where shop_id = #{shopId} and setting_type = #{settingType} 
  </delete>
  <select id="getDistribTakeoutSettingByType" parameterType="java.util.Map" resultType="java.lang.Long">
  	select setting_id from 1dcq_distribution_takeout_setting where shop_id = #{shopId} and setting_type = #{settingType} 
  </select>
  <select id="getDistribTakeoutSetting" resultMap="ResultMapWithBLOBs" parameterType="java.util.Map" >
    select 
    <include refid="Base_Column_List" />
    ,
    <include refid="Blob_Column_List" />
    from 1dcq_distribution_takeout_setting
    where shop_id = #{shopId} and setting_type = #{settingType} limit 1
  </select>
  <insert id="addDistribTakeoutSetting" parameterType="com.idcq.appserver.dto.shop.DistribTakeoutSettingDto" 
   >
  	<selectKey resultType="java.lang.Long" order="AFTER" keyProperty="settingId">
		SELECT LAST_INSERT_ID() AS settingId
	</selectKey>

    insert into 1dcq_distribution_takeout_setting
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="settingId != null" >
        setting_id,
      </if>
      <if test="shopId != null" >
        shop_id,
      </if>
      <if test="settingType != null" >
        setting_type,
      </if>
      <if test="maxReserveBeforeDay != null" >
        max_reserve_before_day,
      </if>
      <if test="minReserveBeforeHour != null" >
        min_reserve_before_hour,
      </if>
      <if test="deliveryDistribution != null" >
        delivery_distribution,
      </if>
      <if test="leastBookPrice != null" >
        least_book_price,
      </if>
      <if test="isCashOnDelivery != null" >
        is_cash_on_delivery,
      </if>
      <if test="isCancelAnytime != null" >
        is_cancel_anytime,
      </if>
      <if test="cancelBeforeMinute != null" >
        cancel_before_minute,
      </if>
      <if test="deliveryPrice != null" >
        delivery_price,
      </if>
      <if test="isReduction != null" >
        is_reduction,
      </if>
      <if test="reduction != null" >
        reduction,
      </if>
      <if test="orderTimeType != null" >
        order_time_type,
      </if>
      <if test="createTime != null" >
        create_time,
      </if>
      <if test="remark != null" >
        remark,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="settingId != null" >
        #{settingId,jdbcType=INTEGER},
      </if>
      <if test="shopId != null" >
        #{shopId,jdbcType=INTEGER},
      </if>
      <if test="settingType != null" >
        #{settingType,jdbcType=TINYINT},
      </if>
      <if test="maxReserveBeforeDay != null" >
        #{maxReserveBeforeDay,jdbcType=INTEGER},
      </if>
      <if test="minReserveBeforeHour != null" >
        #{minReserveBeforeHour,jdbcType=DECIMAL},
      </if>
      <if test="deliveryDistribution != null" >
        #{deliveryDistribution,jdbcType=REAL},
      </if>
      <if test="leastBookPrice != null" >
        #{leastBookPrice,jdbcType=DECIMAL},
      </if>
      <if test="isCashOnDelivery != null" >
        #{isCashOnDelivery,jdbcType=TINYINT},
      </if>
      <if test="isCancelAnytime != null" >
        #{isCancelAnytime,jdbcType=TINYINT},
      </if>
      <if test="cancelBeforeMinute != null" >
        #{cancelBeforeMinute,jdbcType=INTEGER},
      </if>
      <if test="deliveryPrice != null" >
        #{deliveryPrice,jdbcType=DECIMAL},
      </if>
      <if test="isReduction != null" >
        #{isReduction,jdbcType=TINYINT},
      </if>
      <if test="reduction != null" >
        #{reduction,jdbcType=DECIMAL},
      </if>
      <if test="orderTimeType != null" >
        #{orderTimeType,jdbcType=TINYINT},
      </if>
      <if test="createTime != null" >
        #{createTime,jdbcType=TIMESTAMP},
      </if>
      <if test="remark != null" >
        #{remark,jdbcType=LONGVARCHAR},
      </if>
    </trim>
  </insert>
  
   <update id="updateDistribTakeoutSetting" parameterType="com.idcq.appserver.dto.shop.DistribTakeoutSettingDto" >
    update 1dcq_distribution_takeout_setting
    <set >
      <if test="settingId != null" >
        setting_id = #{settingId,jdbcType=INTEGER},
      </if>
      <if test="shopId != null" >
        shop_id = #{shopId,jdbcType=INTEGER},
      </if>
      <if test="settingType != null" >
        setting_type = #{settingType,jdbcType=TINYINT},
      </if>
      <if test="maxReserveBeforeDay != null" >
        max_reserve_before_day = #{maxReserveBeforeDay,jdbcType=INTEGER},
      </if>
      <if test="minReserveBeforeHour != null" >
        min_reserve_before_hour = #{minReserveBeforeHour,jdbcType=DECIMAL},
      </if>
      <if test="deliveryDistribution != null" >
        delivery_distribution = #{deliveryDistribution,jdbcType=REAL},
      </if>
      <if test="leastBookPrice != null" >
        least_book_price = #{leastBookPrice,jdbcType=DECIMAL},
      </if>
      <if test="isCashOnDelivery != null" >
        is_cash_on_delivery = #{isCashOnDelivery,jdbcType=TINYINT},
      </if>
      <if test="isCancelAnytime != null" >
        is_cancel_anytime = #{isCancelAnytime,jdbcType=TINYINT},
      </if>
      <if test="cancelBeforeMinute != null" >
        cancel_before_minute = #{cancelBeforeMinute,jdbcType=INTEGER},
      </if>
      <if test="deliveryPrice != null" >
        delivery_price = #{deliveryPrice,jdbcType=DECIMAL},
      </if>
      <if test="isReduction != null" >
        is_reduction = #{isReduction,jdbcType=TINYINT},
      </if>
      <if test="reduction != null" >
        reduction = #{reduction,jdbcType=DECIMAL},
      </if>
      <if test="orderTimeType != null" >
        order_time_type = #{orderTimeType,jdbcType=TINYINT},
      </if>
      <if test="createTime != null" >
        create_time = #{createTime,jdbcType=TIMESTAMP},
      </if>
      <if test="remark != null" >
        remark = #{remark,jdbcType=LONGVARCHAR},
      </if>
    </set>
    	where setting_id = #{settingId}
  </update>
</mapper>